# /refactor-structure 命令

## 命令格式
```bash
/refactor-structure [重构范围] [优化目标]
```

## 参数说明
- `[重构范围]`: 重构范围，可以是类名、模块名或包名
- `[优化目标]`: 优化目标描述，如事务管理、异常处理、性能优化等

## 功能说明
重构代码结构，包括：
- 代码结构优化
- 设计模式应用
- 性能优化
- 代码质量提升
- 架构改进

## 生成内容

### 1. 重构分析报告
- 当前代码结构分析
- 重构目标识别
- 重构方案设计
- 重构风险评估

### 2. 重构后的代码
- 优化后的代码结构
- 应用设计模式
- 性能优化实现
- 代码质量提升

### 3. 重构说明文档
- 重构原因和目的
- 重构前后对比
- 重构影响分析
- 重构验证方法

### 4. 测试用例更新
- 重构后的测试用例
- 测试覆盖验证
- 性能测试用例
- 回归测试用例

### 5. 配置和依赖更新
- 配置文件更新
- 依赖关系调整
- 接口变更说明
- 迁移指南

## 编码规范遵循
根据`.cursor/rules/01-design-standards/design-pattern-standards.mdc`：
- ✅ 遵循SOLID原则
- ✅ 应用设计模式
- ✅ 优化代码结构
- ✅ 提升代码质量
- ✅ 改善可维护性

## 使用示例

### 1. 优化事务管理
```bash
/refactor-structure UserService 优化事务管理和异常处理
```

### 2. 重构代码结构
```bash
/refactor-structure OrderController 重构代码结构，应用策略模式
```

### 3. 性能优化
```bash
/refactor-structure ProductQuery 性能优化，解决N+1查询问题
```

## 重构类型

### 1. 结构重构
- 包结构重组
- 类职责重新划分
- 接口抽象优化
- 依赖关系调整

### 2. 设计模式重构
- 策略模式应用
- 工厂模式应用
- 观察者模式应用
- 装饰器模式应用

### 3. 性能重构
- 算法优化
- 数据结构优化
- 缓存机制优化
- 数据库查询优化

### 4. 质量重构
- 代码重复消除
- 命名规范统一
- 注释文档完善
- 异常处理优化

## 重构特性
1. **安全性**: 重构过程不影响现有功能
2. **可验证**: 提供重构验证方法
3. **可回滚**: 支持重构回滚机制
4. **可测试**: 重构后代码可测试
5. **可维护**: 提升代码可维护性

## 技术实现
- **分析**: 静态代码分析工具
- **重构**: 自动化重构工具
- **测试**: 自动化测试验证
- **文档**: 重构文档生成
- **验证**: 重构效果验证

## 注意事项
1. 重构前会进行影响分析
2. 重构过程中保持功能完整性
3. 重构后提供完整的测试验证
4. 遵循项目的编码规范和架构设计
5. 重构结果可以直接运行和测试
