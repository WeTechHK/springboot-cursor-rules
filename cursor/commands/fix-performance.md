# /fix-performance 命令

## 命令格式
```bash
/fix-performance [问题模块] [性能瓶颈]
```

## 参数说明
- `[问题模块]`: 问题模块，可以是类名、方法名或模块名
- `[性能瓶颈]`: 性能瓶颈描述，如N+1查询、内存泄漏、CPU占用高等

## 功能说明
修复性能问题，包括：
- 性能问题分析
- 性能优化方案
- 代码重构实现
- 性能测试验证
- 性能监控配置

## 生成内容

### 1. 性能问题分析
- 性能瓶颈识别
- 性能问题根因分析
- 性能影响评估
- 性能优化目标

### 2. 性能优化方案
- 优化策略设计
- 优化方案实现
- 优化效果评估
- 优化风险评估

### 3. 优化后的代码
- 性能优化实现
- 代码重构结果
- 优化配置参数
- 性能监控代码

### 4. 性能测试用例
- 性能基准测试
- 优化效果测试
- 压力测试用例
- 性能回归测试

### 5. 性能监控配置
- 性能指标监控
- 性能告警配置
- 性能分析工具
- 性能报告生成

## 编码规范遵循
根据`.cursor/rules/02-coding-standards/coding-standards.mdc`：
- ✅ 避免N+1查询
- ✅ 优先批量操作与分页
- ✅ 限制单次返回规模
- ✅ 合理的数据结构与算法
- ✅ 压测评估瓶颈并针对性优化

## 使用示例

### 1. 修复N+1查询问题
```bash
/fix-performance UserQuery N+1查询问题
```

### 2. 修复内存泄漏问题
```bash
/fix-performance OrderService 内存泄漏问题
```

### 3. 修复CPU占用高问题
```bash
/fix-performance ProductSearch CPU占用高问题
```

## 性能问题类型

### 1. 数据库性能问题
- N+1查询问题
- 慢查询问题
- 索引缺失问题
- 连接池问题

### 2. 内存性能问题
- 内存泄漏问题
- 内存占用过高
- 垃圾回收问题
- 对象创建过多

### 3. CPU性能问题
- CPU占用过高
- 算法效率问题
- 循环优化问题
- 并发处理问题

### 4. 网络性能问题
- 网络延迟问题
- 数据传输问题
- 连接超时问题
- 带宽占用问题

## 性能优化策略

### 1. 数据库优化
- 查询优化
- 索引优化
- 连接池优化
- 缓存策略优化

### 2. 代码优化
- 算法优化
- 数据结构优化
- 循环优化
- 对象创建优化

### 3. 架构优化
- 缓存架构优化
- 异步处理优化
- 负载均衡优化
- 微服务优化

### 4. 配置优化
- JVM参数优化
- 应用配置优化
- 数据库配置优化
- 网络配置优化

## 性能优化特性
1. **针对性**: 针对具体性能问题优化
2. **可测量**: 提供性能测量和验证
3. **可监控**: 集成性能监控和告警
4. **可维护**: 优化后代码可维护
5. **可扩展**: 支持性能优化扩展

## 技术实现
- **分析**: 性能分析工具
- **优化**: 性能优化实现
- **测试**: 性能测试验证
- **监控**: 性能监控配置
- **文档**: 性能优化文档

## 注意事项
1. 优化前会进行性能分析
2. 优化过程中保持功能完整性
3. 优化后提供完整的性能测试验证
4. 遵循项目的编码规范和性能规范
5. 优化结果可以直接运行和测试
