---
description: 定义常量类的编码标准，包括常量定义、命名规范和访问控制规范
globs: **/src/main/java/**/constants/**Constants.java
layer: L4
allowedReferences: [L4]
---

# Constants 编码约定

## 适用范围
定义常量类的实现规范，用于管理项目中的常量值（不包括错误码）。

## 重要说明
- **禁止**：**错误码不应使用常量类，必须使用 `ErrorCodeEnum` 枚举**
- **禁止**：**ErrorCodeEnum 必须放在 `enums/` 目录，不是 `constants/`**
- 常量类仅用于：配置项、魔法数字、固定字符串等

## 核心规则

### 类定义
- `final class` 防止继承
- `private` 构造器防止实例化
- 类名以 `Constants` 结尾

### 字段定义
- `public static final` 修饰符
- 全大写字母 + 下划线命名
- 编译时常量（基本类型或String）

### 组织原则
- 按功能分组（内部类或注释分隔）
- 提供JavaDoc注释
- **禁止**：包含业务逻辑

## 最小示例
```java
/**
 * 系统常量类
 */
public final class SystemConstants {
    
    private SystemConstants() {
        // 防止实例化
    }
    
    // ==================== JWT相关常量 ====================
    /**
     * JWT密钥
     */
    public static final String JWT_SECRET = "your-secret-key";
    
    /**
     * JWT过期时间（毫秒）
     */
    public static final long JWT_EXPIRATION = 7 * 24 * 60 * 60 * 1000L; // 7天
    
    // ==================== 分页相关常量 ====================
    /**
     * 默认页码
     */
    public static final int DEFAULT_PAGE_NUMBER = 1;
    
    /**
     * 默认每页数量
     */
    public static final int DEFAULT_PAGE_SIZE = 10;
    
    /**
     * 最大每页数量
     */
    public static final int MAX_PAGE_SIZE = 100;
    
    // ==================== 正则表达式 ====================
    /**
     * 邮箱正则
     */
    public static final String EMAIL_PATTERN = "^[A-Za-z0-9+_.-]+@[A-Za-z0-9.-]+$";
    
    /**
     * 手机号正则（中国）
     */
    public static final String PHONE_PATTERN = "^1[3-9]\\d{9}$";
}
```

## 分组建议

### 使用内部类分组（推荐）
```java
public final class AppConstants {
    
    private AppConstants() {}
    
    /**
     * 缓存相关常量
     */
    public static final class Cache {
        public static final String USER_PREFIX = "user:";
        public static final int USER_EXPIRE_SECONDS = 3600;
    }
    
    /**
     * API相关常量
     */
    public static final class Api {
        public static final String V1_PREFIX = "/api/v1";
        public static final String V2_PREFIX = "/api/v2";
    }
}
```

## 使用示例
```java
// 获取常量值
int pageSize = SystemConstants.DEFAULT_PAGE_SIZE;
String jwtSecret = SystemConstants.JWT_SECRET;

// 使用内部类分组的常量
String cacheKey = AppConstants.Cache.USER_PREFIX + userId;
String apiPath = AppConstants.Api.V1_PREFIX + "/users";
```

## 避免魔法数字
```java
// [错误] 不好的做法
if (status == 1) {  // 1是什么意思？
    // ...
}

// [正确] 好的做法
public static final int STATUS_ACTIVE = 1;
if (status == STATUS_ACTIVE) {  // 语义清晰
    // ...
}

// [建议] 更好的做法：使用枚举
public enum Status {
    ACTIVE(1),
    INACTIVE(0);
}
```

## 相关规则
- 枚举类: `04-conventions/enum.mdc`
- 错误码: `04-conventions/error-code-enum.mdc`
