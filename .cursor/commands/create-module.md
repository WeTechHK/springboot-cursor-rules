# /create-module 命令

## 命令格式
```bash
/create-module [一段描述性的话]
```

## 功能说明
创建完整的业务模块，包括实体类、数据访问层、服务层、控制器、请求响应对象和单元测试。

## AI分析流程

### 1. 智能描述解析
- **提取关键信息**：从用户描述中提取模块名称、功能需求、技术需求
- **识别需求类型**：判断是CRUD操作、业务逻辑、API接口等
- **推断实现复杂度**：评估模块的复杂度和实现难度

### 2. 智能文档发现
- **自动扫描**：扫描项目根目录下的`docs/`目录中的设计文档、API文档、数据库文档
- **内容匹配**：基于描述内容匹配相关文档
- **信息提取**：从文档中提取业务需求、API设计、数据模型等
- **文件显示**：在AI响应中显示找到的相关设计文件名，便于用户确认

### 3. 基于项目结构的智能推断
- **项目分析**：分析现有项目的包结构、技术栈、编码风格
- **模块识别**：识别相关模块和依赖关系
- **架构推断**：推断项目的整体架构和设计模式

### 4. 代码文件规则匹配
- **规范匹配**：根据需求匹配对应的编码规范文件
- **设计模式**：应用相应的设计模式和最佳实践
- **代码生成**：生成符合项目规范的完整代码

### 5. 主动询问机制
- **信息补全**：识别缺失或模糊的信息，主动询问用户
- **选项提供**：提供具体的选择选项，便于用户快速确认
- **多轮对话**：支持多轮对话，逐步完善需求

## 使用示例

### 1. 简单描述
```bash
/create-module 用户管理模块
```

### 2. 详细描述
```bash
/create-module 用户管理模块，包含用户注册、登录、权限管理、个人信息管理，支持微信登录，需要角色权限控制
```

### 3. 业务场景描述
```bash
/create-module 订单管理模块，包含订单创建、支付处理、状态更新、物流跟踪，支持多种支付方式
```

### 4. 技术需求描述
```bash
/create-module 商品管理模块，包含商品信息、库存管理、分类管理，需要支持图片上传和搜索功能
```

## 生成内容

### 1. 实体类 (Entity)
- 基于数据库表结构的实体类
- 包含所有必要的注解和字段
- 遵循实体类编码规范

### 2. 数据访问层 (Mapper)
- MyBatis Mapper接口
- 基础的CRUD操作方法
- 复杂查询方法（根据功能描述）

### 3. 服务层 (Service & ServiceImpl)
- 业务接口定义
- 业务逻辑实现
- 事务管理配置
- 异常处理机制

### 4. 控制器 (Controller)
- RESTful API控制器
- 统一的响应格式
- 参数校验和异常处理
- API文档注解

### 5. 请求响应对象 (VO)
- 请求对象 (Request)
- 响应对象 (Response)
- 分页查询对象

### 6. 单元测试
- 服务层单元测试
- 控制器单元测试
- 数据访问层测试

## AI交互示例

### 示例1：简单描述
```bash
# 用户输入
/create-module 用户管理

# AI响应
AI: 已解析您的描述"用户管理"，并发现以下相关文档：

**发现的设计文档：**
- `docs/user-management-design.md` - 用户管理模块设计文档
- `docs/api-design.md` - API接口设计文档  
- `docs/database-design.md` - 数据库设计文档

基于这些文档，User模块将包含以下功能规划：

**模块功能规划：**
1. **用户认证功能**
   - 用户注册和登录
   - 密码管理和重置
   - 第三方登录集成

2. **用户信息管理**
   - 个人信息维护
   - 头像和资料管理
   - 用户状态管理

3. **权限控制功能**
   - 角色权限管理
   - 访问权限控制
   - 操作权限验证

**需要确认的细节：**
1. 用户注册需要哪些字段？（用户名、邮箱、手机号等）
2. 权限管理需要哪些角色？（管理员、普通用户、VIP用户等）
3. 个人信息管理包含哪些信息？（头像、昵称、性别、生日等）
4. 是否需要集成第三方登录？（微信、QQ等）

请提供详细信息，或者确认以上规划是否符合您的需求？
```

### 示例2：详细描述
```bash
# 用户输入
/create-module 用户管理模块，包含用户注册、登录、权限管理、个人信息管理，支持微信登录，需要角色权限控制

# AI响应
AI: 已解析您的详细描述，并发现以下相关文档，User模块将包含完整的功能实现：

**发现的设计文档：**
- `docs/user-management-design.md` - 用户管理模块设计文档
- `docs/wechat-integration-design.md` - 微信登录集成设计文档
- `docs/permission-design.md` - 权限管理设计文档

**模块功能实现：**
1. **用户认证功能**
   - 用户注册和登录
   - 微信登录集成
   - 密码管理和重置

2. **用户信息管理**
   - 个人信息维护
   - 用户资料管理
   - 用户状态管理

3. **权限控制功能**
   - 角色权限管理
   - 用户角色分配
   - 访问权限控制

**API接口设计：**
- POST /api/v1/users - 创建用户
- POST /api/v1/users/login - 用户登录
- GET /api/v1/users/{id} - 获取用户信息
- PUT /api/v1/users/{id} - 更新用户信息
- DELETE /api/v1/users/{id} - 删除用户

**数据库表设计：**
- t_users - 用户基本信息表
- t_roles - 角色信息表
- t_user_roles - 用户角色关联表

**需要确认的细节：**
1. 用户注册需要哪些字段？
2. 权限管理需要哪些角色？
3. 个人信息管理包含哪些信息？
4. 微信登录需要哪些信息？

请确认以上设计是否符合您的需求，或者提供更多详细信息？
```

## 模块特性
1. **完整性**: 包含完整的MVC分层结构
2. **规范性**: 遵循项目编码规范
3. **可测试**: 包含完整的单元测试
4. **可扩展**: 支持后续功能扩展
5. **文档化**: 包含完整的API文档注解

## 技术实现
- **实体类**: 使用Lombok注解，支持Builder模式
- **数据访问**: MyBatis注解模式，支持复杂查询
- **服务层**: Spring事务管理，异常处理机制
- **控制器**: RESTful设计，统一响应格式
- **测试**: JUnit 5 + Mockito + AssertJ

## 注意事项
1. AI会根据描述自动推断功能需求
2. 自动处理数据库表名和字段映射
3. 遵循项目的命名规范和包结构
4. 包含完整的异常处理和日志记录
5. 生成的代码可以直接运行和测试
6. 支持多轮对话完善需求
7. 支持文档引用和智能推断
8. 支持自然语言描述

## 最佳实践建议

### 1. 描述技巧
- **具体描述**: 提供详细的功能描述，AI能更好地理解需求
- **关键功能**: 包含核心功能点，帮助AI生成准确代码
- **技术细节**: 指定数据库类型、缓存策略等技术要求

### 2. 交互技巧
- **分步确认**: 先确认核心功能，再完善细节
- **及时反馈**: 对AI的推断及时提供反馈
- **迭代优化**: 基于生成结果进行迭代优化

### 3. 文档使用
- **设计文档**: 在项目中维护设计文档，AI会自动发现
- **API文档**: 维护API文档，AI会参考生成接口
- **数据库文档**: 维护数据库文档，AI会参考生成实体