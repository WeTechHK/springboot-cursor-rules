# /refactor-naming 命令

## 命令格式
```bash
/refactor-naming [一段描述性的话]
```

## 功能说明
重构命名规范，包括类名重构、方法名重构、变量名重构、包名重构和常量名重构。

## AI分析流程

### 1. 智能描述解析
- **提取关键信息**：从用户描述中提取文件类型、命名问题、重构需求
- **识别重构类型**：判断是类名重构、方法名重构、变量名重构、包名重构等
- **推断重构复杂度**：基于描述推断重构的复杂度和影响范围

### 2. 智能文档发现
- **自动扫描**：扫描项目根目录下的`docs/`目录中的命名规范文档、代码规范文档、重构文档
- **内容匹配**：基于描述内容匹配相关命名规范文档
- **信息提取**：从文档中提取命名规范、重构策略、编码标准等
- **文件显示**：在AI响应中显示找到的相关设计文件名，便于用户确认

### 3. 基于项目结构的智能推断
- **项目分析**：分析现有项目的命名风格、代码规范、重构需求
- **规范识别**：识别相关命名规范和重构规则
- **规范推断**：推断项目的命名重构规范

### 4. 命名重构规则匹配
- **规范匹配**：根据需求匹配对应的命名重构规范
- **重构策略**：应用命名重构策略和最佳实践
- **代码生成**：生成符合项目规范的命名重构代码

### 5. 主动询问机制
- **问题补全**：识别缺失或模糊的命名问题，主动询问用户
- **规范确认**：确认命名规范和重构要求
- **多轮对话**：支持多轮对话，逐步完善重构方案

## 使用示例

### 1. 简单描述
```bash
/refactor-naming 统一API路径和参数命名
```

### 2. 详细描述
```bash
/refactor-naming 统一用户管理模块的API路径和参数命名，使用RESTful风格
```

### 3. 业务场景描述
```bash
/refactor-naming 重构订单服务类方法命名，使用更清晰的业务语义
```

### 4. 技术需求描述
```bash
/refactor-naming 重构实体类字段命名，统一数据库字段映射规范
```

## AI交互示例

### 示例1：简单描述
```bash
# 用户输入
/refactor-naming 统一API路径和参数命名

# AI响应
AI: 已解析您的描述"统一API路径和参数命名"，并发现以下相关文档：

**发现的设计文档：**
- `docs/naming-standards.md` - 命名规范文档
- `docs/api-design-standards.md` - API设计标准文档
- `docs/restful-standards.md` - RESTful标准文档

基于这些文档，将重构以下命名内容：

**推断的重构范围：**
- 控制器类方法命名
- API路径命名规范
- 请求参数命名规范
- 响应字段命名规范

**需要确认的信息：**
1. 需要重构哪些控制器类？
2. 当前API路径存在什么问题？
3. 是否需要使用RESTful风格？
4. 是否需要统一参数命名？
5. 是否需要保持向后兼容？

请提供详细信息，或者确认我的推断是否正确？
```

### 示例2：详细描述
```bash
# 用户输入
/refactor-naming 统一用户管理模块的API路径和参数命名，使用RESTful风格

# AI响应
AI: 已解析您的详细描述，将统一用户管理模块的API路径和参数命名：

**发现的设计文档：**
- `docs/naming-standards.md` - 命名规范文档
- `docs/api-design-standards.md` - API设计标准文档
- `docs/restful-standards.md` - RESTful标准文档

**解析的重构方案：**
1. API路径重构
   - 统一使用RESTful风格
   - 路径使用复数形式
   - 使用动词表示操作
   - 统一版本控制

2. 参数命名重构
   - 使用驼峰命名法
   - 统一参数命名规范
   - 使用有意义的参数名
   - 统一参数类型

3. 方法命名重构
   - 使用RESTful方法名
   - 统一方法命名规范
   - 使用清晰的业务语义
   - 统一异常处理

**需要确认的信息：**
1. 当前API路径的具体问题？
2. 是否需要保持向后兼容？
3. 是否需要重构相关测试？
4. 是否需要更新API文档？

请确认以上信息是否正确，或者提供更多详细信息？
```

## 重构内容

### 1. 命名规范分析
- 当前命名规范分析
- 命名规范问题识别
- 命名规范改进方案
- 命名规范统一标准

### 2. 重构后的代码
- 统一命名规范的代码
- 符合编码规范的命名
- 清晰的命名语义
- 一致的命名风格

### 3. 重构说明文档
- 命名规范变更说明
- 重构前后对比
- 命名规范标准
- 命名规范指南

### 4. 测试用例更新
- 重构后的测试用例
- 命名规范验证
- 功能测试验证
- 回归测试验证

### 5. 配置和依赖更新
- 配置文件更新
- 依赖关系调整
- 接口变更说明
- 迁移指南

## 文件类型重构

### 1. 控制器类 (Controller)
- `UserController` - 用户控制器
- `OrderController` - 订单控制器
- `ProductController` - 商品控制器
- `PaymentController` - 支付控制器

### 2. 服务类 (Service)
- `UserService` - 用户服务
- `OrderService` - 订单服务
- `ProductService` - 商品服务
- `PaymentService` - 支付服务

### 3. 实体类 (Entity)
- `UserEntity` - 用户实体
- `OrderEntity` - 订单实体
- `ProductEntity` - 商品实体
- `PaymentEntity` - 支付实体

### 4. 数据访问类 (Mapper)
- `UserMapper` - 用户数据访问
- `OrderMapper` - 订单数据访问
- `ProductMapper` - 商品数据访问
- `PaymentMapper` - 支付数据访问

### 5. 数据传输对象 (DTO)
- `UserDto` - 用户数据传输对象
- `OrderDto` - 订单数据传输对象
- `ProductDto` - 商品数据传输对象
- `PaymentDto` - 支付数据传输对象

## 命名规范特性
1. **一致性**: 统一的命名风格
2. **可读性**: 清晰的命名语义
3. **可维护性**: 易于理解和维护
4. **可扩展性**: 支持命名扩展
5. **标准化**: 符合编码规范

## 技术实现
- **分析**: 静态代码分析工具
- **重构**: 自动化重构工具
- **验证**: 命名规范验证
- **文档**: 命名规范文档
- **测试**: 重构验证测试

## 注意事项
1. AI会根据描述自动推断重构范围
2. 自动分析命名问题和改进点
3. 提供具体的命名重构方案
4. 遵循项目的编码规范和命名规范
5. 生成的代码可以直接运行和测试
6. 支持多轮对话完善需求
7. 支持文档引用和智能推断
8. 支持自然语言描述

## 最佳实践建议

### 1. 描述技巧
- **具体描述**: 提供详细的命名问题描述，AI能更好地理解需求
- **关键范围**: 包含具体的文件类型和命名问题
- **规范要求**: 指定命名规范和重构标准

### 2. 交互技巧
- **分步确认**: 先确认核心问题，再完善重构方案
- **及时反馈**: 对AI的推断及时提供反馈
- **迭代优化**: 基于重构结果进行迭代改进

### 3. 文档使用
- **规范文档**: 在项目中维护命名规范文档，AI会自动发现
- **API文档**: 维护API文档，AI会参考进行API命名重构
- **代码文档**: 维护代码文档，AI会参考进行代码命名重构