# /create-integration-test 命令

## 命令格式
```bash
/create-integration-test [测试模块] [测试场景]
```

## 参数说明
- `[测试模块]`: 测试模块，可以是模块名或组件名
- `[测试场景]`: 测试场景描述，用于生成相应的集成测试

## 功能说明
创建集成测试代码，包括：
- 集成测试类定义
- 测试场景实现
- 测试环境配置
- 数据准备和清理
- 端到端测试验证

## 生成内容

### 1. 集成测试类 (IntegrationTest)
- 测试类名以`IntegrationTest`结尾
- 使用`@SpringBootTest`注解
- 包含所有必要的测试场景
- 完整的JavaDoc注释

### 2. 测试场景
- 根据测试场景描述生成相应测试
- 端到端业务流程测试
- 组件集成测试
- 数据一致性测试

### 3. 测试环境配置
- 测试配置文件
- 测试数据库配置
- 测试服务配置
- 测试数据准备

### 4. 数据管理
- 测试数据准备
- 测试数据清理
- 数据隔离机制
- 测试数据构建器

### 5. 验证机制
- 业务结果验证
- 数据状态验证
- 外部调用验证
- 性能指标验证

## 编码规范遵循

本命令严格遵循以下编码规范文件：
- **主要规范**：`02-coding-standards/unit-testing-standards.mdc`

**详细规范**：请参考上述规范文件获取完整要求。

## 使用示例

### 1. 创建用户管理API集成测试
```bash
/create-integration-test UserController 用户管理API集成测试
```

### 2. 创建订单流程集成测试
```bash
/create-integration-test Order 订单流程集成测试，包含创建、支付、发货
```

### 3. 创建商品管理集成测试
```bash
/create-integration-test Product 商品管理集成测试，包含商品信息、库存管理
```

## 测试场景类型

### 1. API集成测试
- RESTful API端到端测试
- 请求响应验证
- 参数校验测试
- 异常处理测试

### 2. 业务流程测试
- 完整业务流程测试
- 业务规则验证
- 状态转换测试
- 数据一致性测试

### 3. 组件集成测试
- 服务层集成测试
- 数据访问层集成测试
- 外部服务集成测试
- 消息队列集成测试

### 4. 数据集成测试
- 数据库操作集成测试
- 事务管理测试
- 数据一致性测试
- 并发操作测试

## 集成测试特性
1. **端到端**: 完整的业务流程测试
2. **真实性**: 使用真实的测试环境
3. **可重复性**: 测试数据隔离和清理
4. **可维护性**: 清晰的测试结构和注释
5. **可扩展性**: 支持测试场景扩展

## 技术实现
- **框架**: 使用JUnit 5 + Spring Boot Test
- **注解**: 使用`@SpringBootTest`、`@TestPropertySource`
- **数据**: 使用测试数据库和测试数据
- **验证**: 使用AssertJ进行结果验证
- **清理**: 使用`@DirtiesContext`清理测试状态

## 注意事项
1. 会根据测试场景生成相应的集成测试
2. 自动配置测试环境和测试数据
3. 包含完整的测试覆盖和验证
4. 遵循项目的编码规范和测试规范
5. 生成的代码可以直接运行和测试
